# Race-Conditions
The point of this project was to simulate race conditions using file I/O and to solve the problem using Peterson's Algorithm. The program increment reads the last number in a file, closes it (so race conditions can occur), adds one to the number, and then appends the new number to the end of the file. When two instances of this program are run at once for the same program, race conditions occur. The programs my_solution.c and modified_peterson.c attempt to eliminate the issues associated with this problem.

Both programs use the library functions get_sv() and set_sv(), which were implemented in a previous assignment (the library functions and associated system call were added to the Minix 3 operating system). These functions read and manipulate, respectively, an integer shared_val (again, implemented previously) inherent to every process used in Minix 3. The function get_sv() can retrieve the shared_val of any process. The function set_sv() can set the shared_val of the currently running process.

The program modified_peterson.c implements Petersons Algorithm to ensure that only one program can access the critical section (the file to be read from and written to) at a time. The least significant bit in the shared_val of each instance of the program is used to show that it is interested in the critical section. The exclusive or of the second bits in each of the shared values represents the turn variable. Because two variables are used to represent whose turn it is, setting turn is not atomic and thus Peterson's algorithm, in this situation, is not perfect. For this reason, in each of the attached programs the critical section is made purposely slow, so that the algorithm will still work. The program my_solution.c attempts to provide a similar, but foolproof solution to this problem. It does this by giving one process priority over the other.
